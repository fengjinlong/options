<template>
  <div class="valuation-container">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1 style="font-size: 24px; font-weight: bold; margin: 0">
        åŠ å¯†é¡¹ç›®ä¼°å€¼åˆ†æå·¥å…·
      </h1>
      <p class="subtitle">Crypto Project Valuation Tool</p>
    </div>

    <!-- æ•°æ®è¾“å…¥åŒºåŸŸ -->
    <div class="input-section">
      <div class="section-title">
        <h2>ğŸ“Š é¡¹ç›®æ•°æ®è¾“å…¥</h2>
      </div>

      <!-- é¡¹ç›®åŸºæœ¬ä¿¡æ¯ -->
      <div class="input-group">
        <h3>é¡¹ç›®åŸºæœ¬ä¿¡æ¯</h3>
        <div class="form-row">
          <div class="form-item">
            <label>é¡¹ç›®åç§°</label>
            <input
              v-model="projectData.name"
              type="text"
              placeholder="è¯·è¾“å…¥é¡¹ç›®åç§°"
              class="form-input"
            />
          </div>
          <div class="form-item">
            <label>é¡¹ç›®ç±»å‹</label>
            <select v-model="projectData.type" class="form-select">
              <option value="">è¯·é€‰æ‹©é¡¹ç›®ç±»å‹</option>
              <option value="defi">DeFi</option>
              <option value="dex">DEX</option>
              <option value="blockchain">å…¬é“¾</option>
              <option value="stablecoin">ç¨³å®šå¸</option>
              <option value="cex">CEX</option>
              <option value="other">å…¶ä»–</option>
            </select>
          </div>
        </div>
      </div>

      <!-- æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡ -->
      <div class="input-group">
        <h3>æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡</h3>
        <div class="metrics-grid">
          <div class="metric-item">
            <label>FDV (å®Œå…¨ç¨€é‡Šä¼°å€¼)</label>
            <div class="input-with-unit">
              <input
                v-model.number="projectData.fdv"
                type="number"
                placeholder="0"
                class="form-input"
              />
              <div class="unit-radio-group">
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1"
                    v-model="projectData.fdvUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">ä¸ª</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000"
                    v-model="projectData.fdvUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">m</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000000"
                    v-model="projectData.fdvUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">b</span>
                </label>
              </div>
            </div>
          </div>

          <div class="metric-item">
            <label>MCap (å½“å‰å¸‚å€¼)</label>
            <div class="input-with-unit">
              <input
                v-model.number="projectData.mcap"
                type="number"
                placeholder="0"
                class="form-input"
              />
              <div class="unit-radio-group">
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1"
                    v-model="projectData.mcapUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">ä¸ª</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000"
                    v-model="projectData.mcapUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">m</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000000"
                    v-model="projectData.mcapUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">b</span>
                </label>
              </div>
            </div>
          </div>

          <div class="metric-item">
            <label>TVL (æ€»é”ä»“ä»·å€¼)</label>
            <div class="input-with-unit">
              <input
                v-model.number="projectData.tvl"
                type="number"
                placeholder="0"
                class="form-input"
              />
              <div class="unit-radio-group">
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1"
                    v-model="projectData.tvlUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">ä¸ª</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000"
                    v-model="projectData.tvlUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">m</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000000"
                    v-model="projectData.tvlUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">b</span>
                </label>
              </div>
            </div>
          </div>

          <div class="metric-item">
            <label>å¹´åŒ–æ”¶å…¥</label>
            <div class="input-with-unit">
              <input
                v-model.number="projectData.revenue"
                type="number"
                placeholder="0"
                class="form-input"
              />
              <div class="unit-radio-group">
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1"
                    v-model="projectData.revenueUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">ä¸ª</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000"
                    v-model="projectData.revenueUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">m</span>
                </label>
                <label class="radio-item">
                  <input
                    type="radio"
                    :value="1000000000"
                    v-model="projectData.revenueUnit"
                    class="radio-input"
                  />
                  <span class="radio-label">b</span>
                </label>
              </div>
            </div>
          </div>

          <div class="metric-item">
            <label>æ”¶å…¥å¢é•¿ç‡å­£åº¦ (%)</label>
            <div class="input-with-unit">
              <input
                v-model.number="projectData.revenueGrowth"
                type="number"
                placeholder="0"
                class="form-input"
              />
              <span class="unit-text">%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ç”ŸæˆæŒ‰é’® -->
      <div class="action-section">
        <button
          @click="calculateValuation"
          :disabled="!isFormValid"
          class="calculate-btn"
        >
          ğŸ” ç”Ÿæˆä¼°å€¼åˆ†æ
        </button>
      </div>
    </div>

    <!-- åˆ†æç»“æœå±•ç¤ºåŒº -->
    <div v-if="analysisResult" class="results-section">
      <div class="section-title">
        <h2>ğŸ“ˆ åˆ†æç»“æœ</h2>
      </div>

      <!-- è®¡ç®—ç»“æœ -->
      <div class="results-grid">
        <div class="result-item">
          <div class="metric-name">FDV/MCap</div>
          <div
            class="metric-value"
            :class="getStatusClass(analysisResult.fdvMcapStatus)"
          >
            {{ analysisResult.fdvMcapRatio.toFixed(2) }}
          </div>
          <div class="metric-status">{{ analysisResult.fdvMcapStatus }}</div>
        </div>

        <div class="result-item">
          <div class="metric-name">MCap/TVL</div>
          <div
            class="metric-value"
            :class="getStatusClass(analysisResult.mcapTvlStatus)"
          >
            {{ analysisResult.mcapTvlRatio.toFixed(2) }}
          </div>
          <div class="metric-status">{{ analysisResult.mcapTvlStatus }}</div>
        </div>

        <div class="result-item">
          <div class="metric-name">MCap/å¹´åŒ–æ”¶å…¥</div>
          <div
            class="metric-value"
            :class="getStatusClass(analysisResult.mcapRevenueStatus)"
          >
            {{ analysisResult.mcapRevenueRatio.toFixed(2) }}
          </div>
          <div class="metric-status">
            {{ analysisResult.mcapRevenueStatus }}
          </div>
        </div>

        <div class="result-item">
          <div class="metric-name">FDV/TVL</div>
          <div
            class="metric-value"
            :class="getStatusClass(analysisResult.fdvTvlStatus)"
          >
            {{ analysisResult.fdvTvlRatio.toFixed(2) }}
          </div>
          <div class="metric-status">{{ analysisResult.fdvTvlStatus }}</div>
        </div>

        <div class="result-item">
          <div class="metric-name">æ”¶å…¥å¢é•¿ç‡</div>
          <div
            class="metric-value"
            :class="getStatusClass(analysisResult.revenueGrowthStatus)"
          >
            {{ analysisResult.revenueGrowth }}%
          </div>
          <div class="metric-status">
            {{ analysisResult.revenueGrowthStatus }}
          </div>
        </div>
      </div>

      <!-- ç»¼åˆç»“è®º -->
      <div class="conclusion-section">
        <div class="conclusion-card">
          <h3>ğŸ¯ ç»¼åˆä¼°å€¼ç»“è®º</h3>
          <div class="conclusion-content">
            <div class="conclusion-item">
              <span class="label">é¡¹ç›®ä¼°å€¼çŠ¶æ€:</span>
              <span
                class="value"
                :class="getOverallStatusClass(analysisResult.overallStatus)"
              >
                {{ analysisResult.overallStatus }}
              </span>
            </div>
            <div class="conclusion-item">
              <span class="label">é£é™©ç­‰çº§:</span>
              <span
                class="value"
                :class="getRiskClass(analysisResult.riskLevel)"
              >
                {{ analysisResult.riskLevel }}
              </span>
            </div>
            <div class="conclusion-item">
              <span class="label">æŠ•èµ„å»ºè®®:</span>
              <span class="value">{{ analysisResult.investmentAdvice }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- æŒ‡æ ‡è¯´æ˜åŒºåŸŸ -->
    <div class="explanation-section">
      <div class="section-title">
        <h2>ğŸ“š æŒ‡æ ‡è¯´æ˜</h2>
      </div>

      <div class="explanation-content">
        <div class="explanation-item">
          <h4>1. FDV/MCap (ç¨€é‡Šé£é™©æŒ‡æ ‡)</h4>
          <ul>
            <li><span class="range good">1.0-1.5:</span> å¥åº·ï¼Œç¨€é‡Šé£é™©ä½</li>
            <li>
              <span class="range acceptable">1.5-3.0:</span>
              å¯æ¥å—ï¼Œéœ€å…³æ³¨è§£é”èŠ‚å¥
            </li>
            <li>
              <span class="range caution">3.0-5.0:</span> éœ€è°¨æ…ï¼Œå­˜åœ¨é”ä»“é£é™©
            </li>
            <li>
              <span class="range high">5.0-10:</span> é«˜é£é™©ï¼Œæœªæ¥æŠ›å‹æ˜æ˜¾
            </li>
            <li><span class="range extreme">>10:</span> æé«˜é£é™©ï¼Œä¸¥é‡ç¨€é‡Š</li>
          </ul>
        </div>

        <div class="explanation-item">
          <h4>2. MCap/TVL (å¸‚å€¼ä¸èµ„äº§åŒ¹é…åº¦)</h4>
          <ul>
            <li><span class="range good"><1:</span> å¯èƒ½ä½ä¼°ï¼ŒTVLè´¨é‡é«˜</li>
            <li><span class="range good">1-3:</span> å¥åº·/åˆç†</li>
            <li><span class="range caution">3-5:</span> åé«˜ä¼°</li>
            <li><span class="range high">5-10:</span> é«˜é£é™©</li>
            <li><span class="range extreme">>10:</span> æç«¯é«˜ä¼°</li>
          </ul>
        </div>

        <div class="explanation-item">
          <h4>3. MCap/å¹´åŒ–æ”¶å…¥ (ä¼°å€¼å¯¹æ¯”èµ›é“æ°´å¹³)</h4>
          <ul>
            <li>
              <span class="range good">DEX/DeFi:</span>
              10-30åˆç†ï¼Œ<10ä½ä¼°ï¼Œ>40é«˜ä¼°
            </li>
            <li><span class="range good">å…¬é“¾:</span> 30-100åˆç†ï¼Œ>150é«˜ä¼°</li>
            <li><span class="range good">ç¨³å®šå¸:</span> 5-15åˆç†</li>
            <li><span class="range good">CEX:</span> 5-20åˆç†</li>
            <li><span class="range high">æ–°å…´èµ›é“:</span> 40+é«˜é£é™©æº¢ä»·</li>
          </ul>
        </div>

        <div class="explanation-item">
          <h4>4. FDV/TVL (ä¼°å€¼ä¸èµ„äº§è§„æ¨¡å…³ç³»)</h4>
          <ul>
            <li><span class="range good"><0.5:</span> æ˜¾è‘—ä½ä¼°</li>
            <li><span class="range good">0.5-1.5:</span> åˆç†</li>
            <li><span class="range caution">1.5-3:</span> åé«˜</li>
            <li><span class="range high">>3:</span> é«˜ä¼°è­¦ç¤º</li>
          </ul>
        </div>

        <div class="explanation-item">
          <h4>5. æ”¶å…¥å¢é•¿ç‡ (é¡¹ç›®æˆé•¿æ€§å‚è€ƒ)</h4>
          <ul>
            <li><span class="range good">>50%:</span> çˆ†å‘å¼å¢é•¿ï¼Œä¼°å€¼å¯é«˜</li>
            <li><span class="range good">10%-50%:</span> å¥åº·å¢é•¿</li>
            <li>
              <span class="range caution"><10%:</span> åœæ»æˆ–æˆç†Ÿï¼Œè‹¥ä¼°å€¼é«˜â†’é«˜ä¼°
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from "vue";

// å®šä¹‰åˆ†æç»“æœç±»å‹
interface AnalysisResult {
  fdvMcapRatio: number;
  mcapTvlRatio: number;
  mcapRevenueRatio: number;
  fdvTvlRatio: number;
  revenueGrowth: number;
  fdvMcapStatus: string;
  mcapTvlStatus: string;
  mcapRevenueStatus: string;
  fdvTvlStatus: string;
  revenueGrowthStatus: string;
  overallStatus: string;
  riskLevel: string;
  investmentAdvice: string;
}

// é¡¹ç›®æ•°æ®
const projectData = ref({
  name: "",
  type: "defi",
  fdv: 0,
  fdvUnit: 1000000,
  mcap: 0,
  mcapUnit: 1000000,
  tvl: 0,
  tvlUnit: 1000000,
  revenue: 0,
  revenueUnit: 1000000,
  revenueGrowth: 0,
});

// åˆ†æç»“æœ
const analysisResult = ref<AnalysisResult | null>(null);

// è¡¨å•éªŒè¯
const isFormValid = computed(() => {
  return (
    projectData.value.fdv > 0 &&
    projectData.value.mcap > 0 &&
    projectData.value.tvl > 0 &&
    projectData.value.revenue > 0
  );
});

// å•ä½è½¬æ¢å‡½æ•°
const convertToMillion = (value: number, unit: number) => {
  return (value * unit) / 1000000;
};

// è®¡ç®—ä¼°å€¼æŒ‡æ ‡
const calculateValuation = () => {
  if (!isFormValid.value) return;

  // è½¬æ¢å•ä½åˆ°ç™¾ä¸‡
  const fdv = convertToMillion(
    projectData.value.fdv,
    projectData.value.fdvUnit
  );
  const mcap = convertToMillion(
    projectData.value.mcap,
    projectData.value.mcapUnit
  );
  const tvl = convertToMillion(
    projectData.value.tvl,
    projectData.value.tvlUnit
  );
  const revenue = convertToMillion(
    projectData.value.revenue,
    projectData.value.revenueUnit
  );

  // è®¡ç®—æ¯”ç‡
  const fdvMcapRatio = fdv / mcap;
  const mcapTvlRatio = mcap / tvl;
  const mcapRevenueRatio = mcap / revenue;
  const fdvTvlRatio = fdv / tvl;

  // åˆ¤æ–­çŠ¶æ€
  const fdvMcapStatus = evaluateFdvMcap(fdvMcapRatio);
  const mcapTvlStatus = evaluateMcapTvl(mcapTvlRatio);
  const mcapRevenueStatus = evaluateMcapRevenue(
    mcapRevenueRatio,
    projectData.value.type
  );
  const fdvTvlStatus = evaluateFdvTvl(fdvTvlRatio);
  const revenueGrowthStatus = evaluateRevenueGrowth(
    projectData.value.revenueGrowth
  );

  // ç»¼åˆè¯„ä¼°
  const overallStatus = calculateOverallStatus({
    fdvMcapStatus,
    mcapTvlStatus,
    mcapRevenueStatus,
    fdvTvlStatus,
    revenueGrowthStatus,
  });

  const riskLevel = calculateRiskLevel({
    fdvMcapStatus,
    mcapTvlStatus,
    mcapRevenueStatus,
    fdvTvlStatus,
    revenueGrowthStatus,
  });

  const investmentAdvice = generateInvestmentAdvice(overallStatus);

  analysisResult.value = {
    fdvMcapRatio,
    mcapTvlRatio,
    mcapRevenueRatio,
    fdvTvlRatio,
    revenueGrowth: projectData.value.revenueGrowth,
    fdvMcapStatus,
    mcapTvlStatus,
    mcapRevenueStatus,
    fdvTvlStatus,
    revenueGrowthStatus,
    overallStatus,
    riskLevel,
    investmentAdvice,
  };
};

// è¯„ä¼°å‡½æ•°
const evaluateFdvMcap = (ratio: number) => {
  if (ratio <= 1.5) return "å¥åº·";
  if (ratio <= 3) return "å¯æ¥å—";
  if (ratio <= 5) return "éœ€è°¨æ…";
  if (ratio <= 10) return "é«˜é£é™©";
  return "æé«˜é£é™©";
};

const evaluateMcapTvl = (ratio: number) => {
  if (ratio < 1) return "å¯èƒ½ä½ä¼°";
  if (ratio <= 3) return "å¥åº·";
  if (ratio <= 5) return "åé«˜ä¼°";
  if (ratio <= 10) return "é«˜é£é™©";
  return "æç«¯é«˜ä¼°";
};

const evaluateMcapRevenue = (ratio: number, type: string) => {
  const standards: Record<string, { good: [number, number]; caution: number }> =
    {
      defi: { good: [10, 30], caution: 40 },
      dex: { good: [10, 30], caution: 40 },
      blockchain: { good: [30, 100], caution: 150 },
      stablecoin: { good: [5, 15], caution: 20 },
      cex: { good: [5, 20], caution: 30 },
      other: { good: [20, 50], caution: 60 },
    };

  const standard = standards[type] || standards.other;

  if (ratio < standard.good[0]) return "ä½ä¼°";
  if (ratio <= standard.good[1]) return "åˆç†";
  if (ratio <= standard.caution) return "åé«˜";
  return "é«˜ä¼°";
};

const evaluateFdvTvl = (ratio: number) => {
  if (ratio < 0.5) return "æ˜¾è‘—ä½ä¼°";
  if (ratio <= 1.5) return "åˆç†";
  if (ratio <= 3) return "åé«˜";
  return "é«˜ä¼°è­¦ç¤º";
};

const evaluateRevenueGrowth = (growth: number) => {
  if (growth > 50) return "çˆ†å‘å¼å¢é•¿";
  if (growth >= 10) return "å¥åº·å¢é•¿";
  return "å¢é•¿ç¼“æ…¢";
};

// ç»¼åˆçŠ¶æ€è®¡ç®—
const calculateOverallStatus = (statuses: Record<string, string>) => {
  const goodCount = Object.values(statuses).filter((status) =>
    ["å¥åº·", "åˆç†", "å¯èƒ½ä½ä¼°", "æ˜¾è‘—ä½ä¼°"].includes(status)
  ).length;

  const cautionCount = Object.values(statuses).filter((status) =>
    ["å¯æ¥å—", "åé«˜", "éœ€è°¨æ…"].includes(status)
  ).length;

  const riskCount = Object.values(statuses).filter((status) =>
    ["é«˜é£é™©", "é«˜ä¼°", "é«˜ä¼°è­¦ç¤º", "æç«¯é«˜ä¼°", "æé«˜é£é™©"].includes(status)
  ).length;

  if (riskCount > cautionCount + goodCount) return "é«˜ä¼°";
  if (cautionCount > goodCount) return "åé«˜ä¼°";
  if (goodCount > cautionCount + riskCount) return "åˆç†ä¼°å€¼";
  return "éœ€å…³æ³¨";
};

// é£é™©ç­‰çº§è®¡ç®—
const calculateRiskLevel = (statuses: Record<string, string>) => {
  const riskCount = Object.values(statuses).filter((status) =>
    ["é«˜é£é™©", "é«˜ä¼°", "é«˜ä¼°è­¦ç¤º", "æç«¯é«˜ä¼°", "æé«˜é£é™©"].includes(status)
  ).length;

  if (riskCount >= 3) return "é«˜";
  if (riskCount >= 1) return "ä¸­";
  return "ä½";
};

// æŠ•èµ„å»ºè®®ç”Ÿæˆ
const generateInvestmentAdvice = (overallStatus: string) => {
  if (overallStatus === "é«˜ä¼°") return "å»ºè®®è°¨æ…æŠ•èµ„ï¼Œç­‰å¾…æ›´å¥½çš„å…¥åœºæ—¶æœº";
  if (overallStatus === "åé«˜ä¼°") return "å¯è€ƒè™‘å°ä»“ä½æŠ•èµ„ï¼Œå¯†åˆ‡å…³æ³¨é¡¹ç›®å‘å±•";
  if (overallStatus === "åˆç†ä¼°å€¼") return "å¯è€ƒè™‘æŠ•èµ„ï¼Œä½†éœ€å…³æ³¨æ”¶å…¥å¢é•¿è¶‹åŠ¿";
  if (overallStatus === "éœ€å…³æ³¨") return "éœ€è¦æ›´å¤šä¿¡æ¯è¿›è¡Œåˆ¤æ–­";
  return "å»ºè®®è¿›ä¸€æ­¥åˆ†æé¡¹ç›®åŸºæœ¬é¢";
};

// çŠ¶æ€æ ·å¼ç±»
const getStatusClass = (status: string) => {
  if (["å¥åº·", "åˆç†", "å¯èƒ½ä½ä¼°", "æ˜¾è‘—ä½ä¼°"].includes(status))
    return "status-good";
  if (["å¯æ¥å—", "åé«˜", "éœ€è°¨æ…"].includes(status)) return "status-caution";
  return "status-risk";
};

const getOverallStatusClass = (status: string) => {
  if (status === "åˆç†ä¼°å€¼") return "overall-good";
  if (status === "åé«˜ä¼°") return "overall-caution";
  return "overall-risk";
};

const getRiskClass = (risk: string) => {
  if (risk === "ä½") return "risk-low";
  if (risk === "ä¸­") return "risk-medium";
  return "risk-high";
};
</script>

<style scoped>
.valuation-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.page-header {
  text-align: center;
  margin-bottom: 40px;
}

.page-header h1 {
  font-size: 2.5rem;
  color: #2c3e50;
  margin-bottom: 10px;
}

.subtitle {
  color: #7f8c8d;
  font-size: 1.1rem;
}

.section-title {
  margin-bottom: 20px;
}

.section-title h2 {
  color: #2c3e50;
  border-bottom: 2px solid #3498db;
  padding-bottom: 10px;
}

.input-section {
  background: #f8f9fa;
  padding: 30px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.input-group {
  margin-bottom: 30px;
}

.input-group h3 {
  color: #34495e;
  margin-bottom: 20px;
  font-size: 1.3rem;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

.form-item {
  display: flex;
  flex-direction: column;
}

.form-item label {
  font-weight: 600;
  margin-bottom: 8px;
  color: #2c3e50;
}

.form-input,
.form-select {
  padding: 12px;
  border: 2px solid #e1e8ed;
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.3s;
}

.form-input:focus,
.form-select:focus {
  outline: none;
  border-color: #3498db;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 30px;
}

.metric-item {
  display: flex;
  flex-direction: column;
  margin-bottom: 20px;
}

.input-with-unit {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-width: 50%;
}

.input-with-unit .form-input {
  width: 100%;
}

.unit-radio-group {
  display: flex;
  gap: 8px;
  justify-content: center;
  background: #f8f9fa;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #e1e8ed;
}

.radio-item {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 6px 12px;
  border-radius: 6px;
  transition: all 0.2s;
  background: white;
  border: 1px solid #e1e8ed;
}

.radio-item:hover {
  background: #e3f2fd;
  border-color: #3498db;
}

.radio-item:has(.radio-input:checked) {
  background: #3498db;
  border-color: #2980b9;
  color: white;
}

.radio-input {
  display: none;
}

.radio-label {
  font-weight: 600;
  font-size: 14px;
  user-select: none;
}

.unit-text {
  display: flex;
  align-items: center;
  padding: 0 15px;
  background: #ecf0f1;
  border: 2px solid #e1e8ed;
  border-radius: 8px;
  font-weight: 600;
  color: #2c3e50;
  height: 48px;
  justify-content: center;
}

.action-section {
  text-align: center;
  margin-top: 30px;
}

.calculate-btn {
  background: linear-gradient(135deg, #3498db, #2980b9);
  color: white;
  border: none;
  padding: 15px 40px;
  font-size: 18px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
}

.calculate-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
}

.calculate-btn:disabled {
  background: #bdc3c7;
  cursor: not-allowed;
}

.results-section {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.result-item {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  border-left: 4px solid #3498db;
}

.metric-name {
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 10px;
}

.metric-value {
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 5px;
}

.metric-status {
  font-size: 0.9rem;
  font-weight: 600;
}

.status-good {
  color: #27ae60;
}

.status-caution {
  color: #f39c12;
}

.status-risk {
  color: #e74c3c;
}

.conclusion-section {
  margin-top: 30px;
}

.conclusion-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 12px;
}

.conclusion-card h3 {
  margin-bottom: 20px;
  font-size: 1.5rem;
}

.conclusion-content {
  display: grid;
  gap: 15px;
}

.conclusion-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.conclusion-item:last-child {
  border-bottom: none;
}

.conclusion-item .label {
  font-weight: 600;
}

.conclusion-item .value {
  font-weight: bold;
  padding: 5px 15px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.2);
}

.overall-good {
  background: rgba(39, 174, 96, 0.8) !important;
}

.overall-caution {
  background: rgba(243, 156, 18, 0.8) !important;
}

.overall-risk {
  background: rgba(231, 76, 60, 0.8) !important;
}

.risk-low {
  background: rgba(39, 174, 96, 0.8) !important;
}

.risk-medium {
  background: rgba(243, 156, 18, 0.8) !important;
}

.risk-high {
  background: rgba(231, 76, 60, 0.8) !important;
}

.explanation-section {
  background: #f8f9fa;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.explanation-content {
  display: grid;
  gap: 25px;
}

.explanation-item {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
}

.explanation-item h4 {
  color: #2c3e50;
  margin-bottom: 15px;
  font-size: 1.2rem;
}

.explanation-item ul {
  list-style: none;
  padding: 0;
}

.explanation-item li {
  padding: 8px 0;
  border-bottom: 1px solid #ecf0f1;
}

.explanation-item li:last-child {
  border-bottom: none;
}

.range {
  font-weight: bold;
  padding: 2px 8px;
  border-radius: 4px;
  margin-right: 10px;
}

.range.good {
  background: #d5f4e6;
  color: #27ae60;
}

.range.acceptable {
  background: #fef5e7;
  color: #f39c12;
}

.range.caution {
  background: #fdeaea;
  color: #e67e22;
}

.range.high {
  background: #fadbd8;
  color: #e74c3c;
}

.range.extreme {
  background: #fadbd8;
  color: #c0392b;
}

@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
  }

  .metrics-grid {
    grid-template-columns: 1fr;
  }

  .results-grid {
    grid-template-columns: 1fr;
  }

  .conclusion-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .unit-radio-group {
    flex-wrap: wrap;
  }

  .input-with-unit {
    max-width: 100%;
  }
}
</style>
